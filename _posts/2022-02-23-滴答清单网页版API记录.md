---
Toc: true
comments: true
title: 滴答清单网页版 API 记录
Date: 2022-02-23 17:52:57 +0800
---

因为计算机是我每天学习工作的主力，有时候想在清理滴答清单任务的时候计时，但又发现滴答清单没有计时功能，所以想着后续有时间用滴答清单的 API 写个简单的计时功能，这样可以直接集成不用造 todolist 的轮子了。以下是在研究滴答清单网页版时发现的一些 API。目前官网有意愿放出 API 文档，但是目前只有一个简陋的旧版本文档，所以只能自己动手了。

## 基本说明

### 业务逻辑 TODO

待补充各个 API 之间的逻辑关系。

### cookie 设置

1. 请求头中 cookie 需要包含 t=xxxxx 字段，否则部分请求会出现 500 错误等
2. xxxxx 为**登录**API返回的`token`字段的值

## API 列表

### 登录

* 地址：https://api.dida365.com/api/v2/user/signon?wc=true&remember=true

* 类型：POST

* body：

  ```json
  {
    "password": "密码",
    "username": "邮箱"
  }
  ```

* 返回值：

  ```json
  {
      "token": "xxxx",
      "userId": "xxxxx",
      "username": "xxxx",
      "proStartDate": "2018-12-13T11:24:50.000+0000",
      "proEndDate": "2022-12-13T12:41:14.000+0000",
      "subscribeType": "order",
      "needSubscribe": true,
      "inboxId": "xxxx",
      "teamUser": false,
      "activeTeamUser": false,
      "freeTrial": false,
      "pro": true,
      "ds": false
  }
  ```

### WebSocket

* 地址：wss://wss.dida365.com/web
* 说明：接收来自服务器的信息，比如任务更新等

### PushRegister

* 地址：https://api.dida365.com/api/v2/push/register

* 类型：POST

* body：

  ```json
  {
      "pushToken": "WebSocket返回的token",
      "osType": 41
  }
  ```