---
Toc: true
comments: true
title: mini主机搭建家庭服务器
Date: 2023-07-31 10:10:58 +0800
categories: [生活, Linux]
image:
  path: /assets/img/homelab/homelab.png
  alt: homepage 示意图
---

## 为什么你需要一台家庭服务器

> 一般情况下，你并不需要一台家庭服务器
{: .prompt-tip}

现有的需要云服务已经能够满足所需，例如文件存储的百度云等各大云盘、流媒体的各大视频网站、各种不同应用 APP 如记账软件、相册备份软件等等。**如果你的应用生态一直都是围绕着这类开放、收费的平台/软件，没有尝试过自己运行一些开源的软件进行替换的话，那么并不推荐你去折腾家庭服务器**，尤其是对非 IT 人员来说，折腾家庭服务器的**时间成本**还是很高的，不如继续用下去。

如果你之前已经尝试过自行部署运行一些开源项目为自己或者其他人提供服务，且已融入到日常使用中，那么一台家庭服务器还是十分推荐的！

家庭服务器主要由以下几个**<font color=dodgerblue>推荐理由</font>**：
1. **昂贵的云服务器**：无论是腾讯云、阿里云，以及国内外其它云平台，除了一些折扣力度特别大的低配入门套餐之外，云服务器的成本是很高的，像是4vCPU、8GB RAM的云服务器一个月就要好几百，如果再加上TB级别的存储，那就更贵了；而普通的家用迷你主机、笔记本、台式机等，价格从几百到上万不等，云服务器一年的成本远远足够买一台性能较好的设备了。
2. **可控的数据**：相较于收费的服务/应用，如一些记账APP等，家庭服务器上可以部署开源软件进行替换，确保自己的数据由自己掌控。一方面是数据隐私问题；另一方面是应用存活的问题，加入选择的应用退市了，那么你的数据就没了，就算提前导出备份了，如何导入到另外一个应用中又是一大问题。而开源软件则不存在这种情况。
3. **远高于云服务器的带宽**：云服务器的带宽是很贵的！而且低带宽！而家用带宽上行100M下行1000M都很普遍了！
4. **一些没有商用软件/应用的需求**：并不是所有的软件都能找到商用版本，比如 emby、jellyfin 等，还有一些阅读软件。这些软件私人用没啥大问题，但是一旦收费商用推广后估计就要出事了。另外还有一些自己、他人开发的一些小程序、应用等，都可以在服务器上跑起来。

当然，也有很多**<font color=orangered>缺点</font>**：
1. **较为高昂的前期投入**：电脑家里可能已经有了，但是为了数据安全考虑，多块TB级别的机械硬盘、支持 raid 的设备家里可能没有，这些都需要前期投入。以我为例，小主机 900 + 硬盘 2000 + raid 双盘位硬盘盒 600 = 3500，相较于付费使用一些软件来说，这个价格把各种软件加起来也能用将近10年了。
2. **不那么安全的数据安全**：虽然可以通过 raid、冷备份、异地备份等方式疯狂备份数据，利用 UPS 等防止突然断电，然而除非下血本，否则永远比不上阿里云、腾讯云这些商用的。你总会担心服务器是否正常运行，以及家庭用电是否安全。
3. **时间成本**：折腾一个东西，总是要有代价的，这个不仅要你的钱，还需要你的时间。就算你是 IT 从业人员，也要折腾一段时间，而且不像是商用平台有客服和工程师售后，家庭服务器的所有问题只能靠你自己解决了。
4. **占地方**：就算是 mini 主机，也总归要占用一块地方运行，而且要求有网线、有电源、通风良好、干燥温度正常的区域，一方面家庭布线是个问题，另一方面它会影响打扫卫生的；可以弄个封闭式机柜，然而我猜大部分家里并没有预留这样一个角落。
5. **越来越多的后期投入**：有一定概率，后面你会想单车变摩托，加钱买更专业的服务器、路由器等。

## 设备选择

虽然说任意一台电脑都可以作为家庭服务器，但是一般家庭还是需要从性价比、稳定性等方面考虑。

1. 设备性能：虽然说整体上性能越高越好，包括文件处理、IO、流媒体解码等等都需要一定的性能要求，然而越高的性能一方面可能出现性能过剩，另一方面功耗、价格也会随之增加

> 我的设备：
> 1. N200 mini 主机： 8GB 内存，128GB 固态，单千兆网口，单 usb c
> 2. 双盘位 raid 硬盘盒 + 2 x 4TB 机械硬盘
{: .prompt-info}

## 基础系统配置

### 系统安装

Ubuntu？
pve？

### 网络配置

ipv4？ipv6？

### 硬盘盒

### docker

## 部署服务

### 域名

### NGINX

NGINX or other
NGINX-ui

### https

### 开源服务推荐

